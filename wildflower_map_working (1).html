<!DOCTYPE html>
<html>
<head>
    <title>Wildflower Blooms - Seasonal Map</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { height: 100vh; }
        
        .controls {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
        }
        
        .controls h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        
        button {
            padding: 8px 15px;
            margin: 0 5px;
            border: 2px solid #333;
            border-radius: 5px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        
        button:hover {
            background: #f0f0f0;
        }
        
        button.selected {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .info h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        
        .legend-row {
            margin: 5px 0;
        }
        
        .color-square {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 8px;
            vertical-align: middle;
            border: 1px solid #333;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <div class="controls">
        <h2>üåª Select Blooming Season üåª</h2>
        <button id="btn-spring" class="selected">üå∏ Spring</button>
        <button id="btn-summer">‚òÄÔ∏è Summer</button>
        <button id="btn-fall">üçÇ Fall</button>
        <button id="btn-winter">‚ùÑÔ∏è Winter</button>
    </div>
    
    <div class="info">
        <h3>Legend</h3>
        <div class="legend-row">
            <span class="color-square" style="background:#2ECC71;"></span>
            Wild (Blooming)
        </div>
        <div class="legend-row">
            <span class="color-square" style="background:#9B59B6;"></span>
            Plantation (Blooming)
        </div>
        <div class="legend-row">
            <span class="color-square" style="background:#D0D0D0;"></span>
            Not Blooming
        </div>
        <hr style="margin: 10px 0;">
        <strong>Sites Blooming: <span id="bloom-count">23</span> / 24</strong>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Initialize map
        var map = L.map('map').setView([35, -115], 5);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        
        // All 24 wildflower sites
        var sites = [
            {name: "Chino Hills", type: "Wild", seasons: ["spring"], lat: 33.93, lng: -117.75},
            {name: "Carrizo Plain National Monument", type: "Wild", seasons: ["spring"], lat: 35.15, lng: -119.85},
            {name: "Antelope Valley California Poppy Reserve", type: "Wild", seasons: ["spring"], lat: 34.72, lng: -118.40},
            {name: "Laura and Jack Dangermond Reserve", type: "Wild", seasons: ["spring"], lat: 34.50, lng: -120.45},
            {name: "Sedgwick Reserve", type: "Wild", seasons: ["spring"], lat: 34.70, lng: -120.03},
            {name: "Anza-Borrego Desert State Park", type: "Wild", seasons: ["spring"], lat: 33.05, lng: -116.20},
            {name: "Monta√±a de Oro State Park", type: "Wild", seasons: ["spring"], lat: 35.22, lng: -120.80},
            {name: "Figueroa Mountain", type: "Wild", seasons: ["spring"], lat: 34.70, lng: -119.75},
            {name: "Red Hills Recreational Area", type: "Wild", seasons: ["spring"], lat: 37.85, lng: -120.50},
            {name: "Jepson Prairie Preserve", type: "Wild", seasons: ["spring"], lat: 38.27, lng: -121.82},
            {name: "Bear Valley Wildflower", type: "Wild", seasons: ["spring"], lat: 39.12, lng: -122.43},
            {name: "North Table Mountain Reserve", type: "Wild", seasons: ["spring"], lat: 39.60, lng: -121.55},
            {name: "Channel Islands National Park", type: "Wild", seasons: ["spring"], lat: 34.00, lng: -119.80},
            {name: "Black Canyon City", type: "Wild", seasons: ["spring"], lat: 34.15, lng: -112.15},
            {name: "Suguaro Lake", type: "Wild", seasons: ["spring"], lat: 33.60, lng: -111.55},
            {name: "San Carlos Reservation", type: "Wild", seasons: ["spring"], lat: 33.35, lng: -110.45},
            {name: "Golden Valley", type: "Wild", seasons: ["spring"], lat: 35.00, lng: -114.25},
            {name: "Estrella Mountain Regional Park", type: "Wild", seasons: ["spring"], lat: 33.33, lng: -112.37},
            {name: "Picacho Peak State Park", type: "Wild", seasons: ["spring"], lat: 32.63, lng: -111.42},
            {name: "South Mountain Park", type: "Wild", seasons: ["spring"], lat: 33.34, lng: -112.08},
            {name: "Gold Butte National Monument", type: "Wild", seasons: ["spring"], lat: 36.25, lng: -114.20},
            {name: "Carlsbad Ranch", type: "Plantation", seasons: ["spring"], lat: 33.13, lng: -117.32},
            {name: "Lompoc Flower Fields", type: "Plantation", seasons: ["spring", "summer"], lat: 34.66, lng: -120.52},
            {name: "Yolo sunflowers", type: "Plantation", seasons: ["summer"], lat: 38.55, lng: -121.85}
        ];
        
        // Store markers
        var markers = [];
        
        // Create markers for all sites
        sites.forEach(function(site) {
            var marker = L.circleMarker([site.lat, site.lng], {
                radius: 12,
                weight: 2,
                color: 'white',
                fillOpacity: 0.8
            }).addTo(map);
            
            marker.bindPopup(
                '<strong>' + site.name + '</strong><br>' +
                'Type: ' + site.type + '<br>' +
                'Blooms: ' + site.seasons.join(', ')
            );
            
            markers.push({
                marker: marker,
                site: site
            });
        });
        
        // Function to update map colors
        function updateMap(season) {
            var bloomingCount = 0;
            
            markers.forEach(function(item) {
                var isBlooming = item.site.seasons.includes(season);
                
                if (isBlooming) {
                    bloomingCount++;
                    // Set color based on type
                    var color = item.site.type === "Wild" ? "#2ECC71" : "#9B59B6";
                    item.marker.setStyle({ fillColor: color });
                } else {
                    // Not blooming - gray
                    item.marker.setStyle({ fillColor: "#D0D0D0" });
                }
            });
            
            // Update count
            document.getElementById('bloom-count').textContent = bloomingCount;
        }
        
        // Add click handlers to buttons
        document.getElementById('btn-spring').addEventListener('click', function() {
            document.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');
            updateMap('spring');
        });
        
        document.getElementById('btn-summer').addEventListener('click', function() {
            document.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');
            updateMap('summer');
        });
        
        document.getElementById('btn-fall').addEventListener('click', function() {
            document.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');
            updateMap('fall');
            alert('No wildflower sites in this dataset bloom in Fall.');
        });
        
        document.getElementById('btn-winter').addEventListener('click', function() {
            document.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');
            updateMap('winter');
            alert('No wildflower sites in this dataset bloom in Winter.');
        });
        
        // Initialize with spring
        updateMap('spring');
    </script>
</body>
</html>